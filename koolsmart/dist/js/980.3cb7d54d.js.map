{"version":3,"file":"js/980.3cb7d54d.js","mappings":"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","sources":["webpack://xiaolou/./src/views/ViewpointDesignView/index.vue","webpack://xiaolou/src/views/ViewpointDesignView/index.vue","webpack://xiaolou/./src/views/ViewpointDesignView/index.vue?c3b1","webpack://xiaolou/./src/views/ViewpointDesignView/index.vue?3eca","webpack://xiaolou/./src/utils/uid.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"main\"},[_c('el-row',{staticClass:\"panel\"},[_c('el-col',{staticClass:\"sub-panel\",attrs:{\"span\":7}},[_c('div',{staticClass:\"title\"},[_c('div',[_vm._v(\"视角设计\")])]),_c('div',{staticClass:\"viewpoint-content\"},[_c('div',{staticClass:\"viewpoint-card\"},[_c('el-card',{staticClass:\"viewpoint-image\",attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"hover\"}},[_c('div',{staticClass:\"new-item\",on:{\"click\":_vm.handleCreateViewpointBtnClick}},[_c('el-button',{staticClass:\"basic-btn\",attrs:{\"size\":\"small\",\"circle\":\"\",\"icon\":\"el-icon-plus\"}}),_c('div',{staticClass:\"text\"},[_c('p',[_vm._v(\"创建新视角\")])])],1)])],1),_vm._l((_vm.viewpoints),function(item){return _c('div',{key:item.path,staticClass:\"viewpoint-card\"},[_c('i',{staticClass:\"el-icon-delete\",on:{\"click\":() => {\n                _vm.handleViewpointDeleteBtnClick(item);\n              }}}),_c('el-card',{staticClass:\"viewpoint-image\",attrs:{\"body-style\":{ padding: '0px' },\"shadow\":\"hover\"},nativeOn:{\"click\":function($event){return _vm.handleViewpointCardClick(item)}}},[_c('el-image',{attrs:{\"fit\":\"cover\",\"src\":item.backgroundUrl}})],1),_c('div',[_vm._v(_vm._s(item.name))])],1)})],2)]),_c('el-col',{staticClass:\"right-panel\",attrs:{\"span\":17}},[_c('el-empty',{attrs:{\"description\":\"请在左边编辑/创建视角\"}}),_c('el-button',{staticClass:\"publish-btn\",on:{\"click\":_vm.handlePublishBtnClick}},[_vm._v(\"预览发布\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main\">\n    <el-row class=\"panel\">\n      <el-col :span=\"7\" class=\"sub-panel\">\n        <div class=\"title\">\n          <div>视角设计</div>\n        </div>\n\n        <div class=\"viewpoint-content\">\n          <div class=\"viewpoint-card\">\n            <el-card\n              class=\"viewpoint-image\"\n              :body-style=\"{ padding: '0px' }\"\n              shadow=\"hover\"\n            >\n              <div class=\"new-item\" @click=\"handleCreateViewpointBtnClick\">\n                <el-button\n                  size=\"small\"\n                  class=\"basic-btn\"\n                  circle=\"\"\n                  icon=\"el-icon-plus\"\n                ></el-button>\n                <div class=\"text\"><p>创建新视角</p></div>\n              </div>\n            </el-card>\n          </div>\n          <div\n            class=\"viewpoint-card\"\n            v-for=\"item in viewpoints\"\n            :key=\"item.path\"\n          >\n            <i\n              class=\"el-icon-delete\"\n              @click=\"\n                () => {\n                  handleViewpointDeleteBtnClick(item);\n                }\n              \"\n            ></i>\n            <el-card\n              class=\"viewpoint-image\"\n              :body-style=\"{ padding: '0px' }\"\n              @click.native=\"handleViewpointCardClick(item)\"\n              shadow=\"hover\"\n            >\n              <el-image fit=\"cover\" :src=\"item.backgroundUrl\" />\n            </el-card>\n\n            <div>{{ item.name }}</div>\n          </div>\n        </div>\n      </el-col>\n\n      <el-col :span=\"17\" class=\"right-panel\">\n        <el-empty description=\"请在左边编辑/创建视角\"></el-empty>\n        <el-button class=\"publish-btn\" @click=\"handlePublishBtnClick\"\n          >预览发布</el-button\n        >\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport generateUniqueId from \"@/utils/uid\";\n\nexport default {\n  name: \"ViewpointDesignView\",\n  components: {},\n  data() {\n    return {\n      viewpoints: [],\n      createSceneModeFlag: false,\n      newSceneModeName: \"\",\n      isShow: true,\n    };\n  },\n  computed: {},\n  created() {\n    this.viewpoints = this.$store.state.projectStore.selectedProject.viewpoints;\n    console.log(this.viewpoints);\n  },\n  methods: {\n    handleViewpointDeleteBtnClick(viewpoint) {\n      this.$confirm(\"你想要删除这个视角配置吗?\", \"Prompt\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\",\n      }).then(\n        (res) => {\n          const selectedProject =\n            this.$store.state.projectStore.selectedProject;\n          selectedProject.viewpoints = selectedProject.viewpoints.filter(\n            (item) => item.id !== viewpoint.id\n          );\n          this.$store.commit(\n            \"projectStore/setSelectedProject\",\n            selectedProject\n          );\n          this.viewpoints = selectedProject.viewpoints;\n        },\n        (err) => {}\n      );\n    },\n    handleCreateViewpointBtnClick() {\n      // 需要添加底图选择弹窗\n      const newViewpoint = {\n        id: generateUniqueId(),\n        name: \"新建视角\",\n        backgroundUrl: \"\",\n        entities: [],\n      };\n      this.$store.commit(\"viewpointStore/setEditViewpoint\", newViewpoint);\n      this.$router.push(\"/project/viewpoint-design/edit\");\n    },\n    handleViewpointCardClick(viewpoint) {\n      this.$store.commit(\"viewpointStore/setEditViewpoint\", viewpoint);\n      this.$router.push(\"/project/viewpoint-design/edit\");\n    },\n    handlePublishBtnClick() {\n      this.$router.push(\"/project/publish\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import \"./index.less\";\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=93f48afc&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=93f48afc&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"93f48afc\",\n  null\n  \n)\n\nexport default component.exports","export default function generateUniqueId() {\n  let uid = new Date().getTime() + Math.floor(Math.random() * 10000000);\n  return uid.toString();\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","_v","padding","on","handleCreateViewpointBtnClick","_l","viewpoints","item","key","path","click","handleViewpointDeleteBtnClick","nativeOn","$event","handleViewpointCardClick","backgroundUrl","_s","name","handlePublishBtnClick","staticRenderFns","components","data","createSceneModeFlag","newSceneModeName","isShow","computed","created","$store","state","projectStore","selectedProject","console","log","methods","viewpoint","$confirm","confirmButtonText","cancelButtonText","type","then","res","filter","id","commit","err","newViewpoint","generateUniqueId","entities","$router","push","component","uid","Date","getTime","Math","floor","random","toString"],"sourceRoot":""}